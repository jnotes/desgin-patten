# 里氏替换原则

> 所有可以使用父类的地方就可以使用子类进行替换。

在面向对象的语言中，继承是必不可少的、非常优秀的语言机制，它有如下优点：
- 代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性。
- 提高代码的重用性。
- 子类可以形似父类，但又异于父类。
- 提高代码的可扩展性。
- 提高产品或项目的开放性。

继承的缺点如下：
- 继承是侵入性的，只要继承，就必须拥有父类的所有属性和方法。
- 降低代码的灵活性。
- 增强了耦合性。当父类的常量、变量和方法被修改时，需要考虑子类的修改，而且在缺乏规范的环境下，这种修改可能需要代码重构。

> 如何让继承的利大于弊，解决的方案是引入里氏替换原则。

里氏替换原则(LSP)的定义：
- 严格的定义：如果对每一个类型为T1的对象o1，都有类型为T2的对象o2，使得以T1定义的所有程序P在所有的对象o1都换成o2时，程序P的行为没有变化，那么类型T2是类型T1的子类型。
- 通俗的定义：所有引用基类的地方必须能透明地使用其子类的对象。
- 更通俗的定义：子类可以扩展父类的功能，但不能改变父类原有的功能。

里氏替换原则包含以下4层含义：
- 子类可以实现父类的抽象方法，但是不能覆盖父类的非抽象方法。
- 子类中可以增加自己特有的方法。
- 当子类覆盖或实现父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。
- 当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。

> 采用里氏替换原则的目的就是增强程序的健壮性，版本升级时也可以保持非常好的兼容性。即使增加子类，原有的子类还可以继续运行。在实际项目中，每个子类对应不同的业务含义，使用父类作为参数，传递不同的子类完成不同的业务逻辑。

> 里氏替换原则为良好的继承定义了一个规范。
